# ========================================
# ETF RAG Agent Configuration
# ========================================

# ----------------------------------------
# LLM Configuration
# ----------------------------------------
# Choose: "openai" or "local"
# Render 배포 시: openai (로컬 Ollama 사용 불가)
# 로컬 개발 시: local (무료)
LLM_PROVIDER=local

# OpenAI API Configuration
# OPENAI_API_KEY=your-openai-api-key-here
# gpt-4o-mini: 가장 가성비 좋음 (qwen2.5:3b보다 좋고 저렴)
# gpt-3.5-turbo: 조금 더 저렴하지만 성능은 약간 낮음
# OPENAI_MODEL=gpt-3.5-turbo
# text-embedding-3-small: 1536차원, 로컬 모델보다 좋고 저렴
# OPENAI_EMBEDDING_MODEL=text-embedding-3-small
# OPENAI_TIMEOUT=25  # API 호출 타임아웃 (초), Render는 30s 제한

# Local LLM Configuration (for local option)
LOCAL_MODEL_PATH=
LOCAL_MODEL_TYPE=qwen2.5:3b
OLLAMA_BASE_URL=http://localhost:11434

# ----------------------------------------
# Weaviate Configuration
# ----------------------------------------
# Render 배포 시: Weaviate Cloud 사용 (필수)
# 로컬 개발 시: http://localhost:8081 사용 가능
WEAVIATE_URL=http://localhost:8081
# Weaviate Cloud 사용 시:
# WEAVIATE_URL=https://your-cluster.weaviate.cloud
# WEAVIATE_API_KEY=your-weaviate-api-key
WEAVIATE_API_KEY=
WEAVIATE_CLASS_NAME=ETFDocument

# ----------------------------------------
# DART API Configuration (선택 - 공시문서 수집용)
# ----------------------------------------
# DART_API_KEY=your-dart-api-key-here
# Get your key from: https://opendart.fss.or.kr/
# Get your key from: https://opendart.fss.or.kr/

# ----------------------------------------
# Crawler Configuration
# ----------------------------------------
# Domestic ETF list URL
NAVER_ETF_LIST_URL=https://finance.naver.com/sise/etf.naver

# Selenium WebDriver (optional - for dynamic pages)
USE_SELENIUM=false
CHROMEDRIVER_PATH=/usr/local/bin/chromedriver

# ----------------------------------------
# Scheduler Configuration
# ----------------------------------------
# Daily crawling time (24-hour format)
CRAWL_TIME_HOUR=9
CRAWL_TIME_MINUTE=0

# Enable/Disable scheduler
# true: 스케줄러 활성화 (주간 자동화)
# false: 완전 비활성화 (수동 수집만 사용 - Render 배포 시 권장)
ENABLE_SCHEDULER=false

# Run initial collection on server startup
# true: 서버 시작 시 즉시 데이터 수집 1회 실행 (로컬 권장)
# false: 서버 시작 후 수집 안 함 (Render 배포 시 권장 - 포트 스캔 타임아웃 방지)
RUN_INITIAL_COLLECTION=false

# Data Collection Strategy
# true: 최근 7일 이내 업데이트 안 된 ETF만 수집 (효율적, 권장)
# false: 모든 ETF를 매번 수집 (시간 오래 걸림)
COLLECT_ONLY_OUTDATED=true

# 데이터 갱신 기준 (일)
# ETF가 이 일수보다 오래되면 다시 수집
UPDATE_THRESHOLD_DAYS=7

# Data Collection Limits (테스트용)
# 국내 ETF 수집 최대 개수 (None: 전체, 10: 테스트용)
MAX_DOMESTIC_ETFS=10

# 해외 ETF 수집 최대 개수 (None: 전체, 10: 테스트용)
MAX_FOREIGN_ETFS=10

# DART 공시 수집 최대 개수 (None: 전체, 10: 테스트용)
MAX_DART_DOCS=10

# Timezone setting
TIMEZONE=Asia/Seoul

# ============================================
# Hugging Face Spaces 배포 설정
# ============================================
# Hugging Face Access Token (배포 시 필요)
# GitHub Secrets에 저장 권장
# HF_TOKEN=your-hf-token-here

# Hugging Face Space ID (username/space-name)
# HF_SPACE=username/space-name

# ----------------------------------------
# Server Configuration
# ----------------------------------------
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
DEBUG=false
RELOAD=false
CORS_ORIGINS=*

API_HOST=0.0.0.0
API_PORT=8000

GRPC_HOST=0.0.0.0
GRPC_PORT=50051

# ----------------------------------------
# Application Settings
# ----------------------------------------
ENVIRONMENT=development
PROJECT_NAME=ETF RAG Agent
PROFILING=false

# ----------------------------------------
# Gradio Settings
# ----------------------------------------
GRADIO_PORT=7860

# ----------------------------------------
# Data Storage
# ----------------------------------------
DATA_DIR=./data
RAW_DATA_DIR=./data/raw
METADATA_FILE=./data/metadata.json

# ----------------------------------------
# Logging
# ----------------------------------------
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=./logs/etf-rag-agent.log

# ----------------------------------------
# RAG Configuration
# ----------------------------------------
# Number of documents to retrieve
TOP_K_RESULTS=5

# Similarity threshold (0-1)
SIMILARITY_THRESHOLD=0.7

# Enable response caching
ENABLE_CACHE=false
CACHE_TTL_SECONDS=3600

# RAG 생성 파라미터
RAG_TOP_K=3
RAG_TEMPERATURE=0.7
RAG_MAX_TOKENS=2000

# Embedding Configuration
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIM=1536

# ----------------------------------------
# Version Control for Vector Store
# ----------------------------------------
# Enable duplicate detection
ENABLE_DUPLICATE_CHECK=true

# Keep historical versions
KEEP_HISTORY=true
MAX_VERSIONS_PER_ETF=10
